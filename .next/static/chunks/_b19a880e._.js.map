{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/kyawzinwinhtike/Desktop/battery_shop_ui/libs/apiErrorHandler.ts"],"sourcesContent":["import axios from \"axios\";\n\nexport const handleApiError = (error: unknown): never => {\n  if (axios.isAxiosError(error)) {\n    const backendMessage =\n      error.response?.data?.message ||\n      error.response?.data?.error ||\n      \"Request failed\";\n\n    throw new Error(backendMessage);\n  }\n\n  if (error instanceof Error) {\n    throw new Error(error.message);\n  }\n\n  throw new Error(\"Network error. Please try again.\");\n};\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,iBAAiB,CAAC;IAC7B,IAAI,mJAAK,CAAC,YAAY,CAAC,QAAQ;YAE3B,sBAAA,iBACA,uBAAA;QAFF,MAAM,iBACJ,EAAA,kBAAA,MAAM,QAAQ,cAAd,uCAAA,uBAAA,gBAAgB,IAAI,cAApB,2CAAA,qBAAsB,OAAO,OAC7B,mBAAA,MAAM,QAAQ,cAAd,wCAAA,wBAAA,iBAAgB,IAAI,cAApB,4CAAA,sBAAsB,KAAK,KAC3B;QAEF,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,iBAAiB,OAAO;QAC1B,MAAM,IAAI,MAAM,MAAM,OAAO;IAC/B;IAEA,MAAM,IAAI,MAAM;AAClB","debugId":null}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/kyawzinwinhtike/Desktop/battery_shop_ui/libs/api.ts"],"sourcesContent":["import { AuthResponse, SendOtpResponse } from \"@/types/auth\";\nimport axios from \"axios\";\nimport { handleApiError } from \"./apiErrorHandler\";\n\n//create axios instance\nconst api = axios.create({\n  baseURL: \"http://localhost:5000/api/v1\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\n// login user\nexport const LoginUser = async (\n  email: string,\n  password: string\n): Promise<AuthResponse> => {\n  try {\n    const res = await api.post<AuthResponse>(\"/auth/login\", {\n      email,\n      password,\n    });\n    return res.data;\n  } catch (error: unknown) {\n    handleApiError(error);\n    throw error;\n  }\n};\n\n// register user\nexport const SignUpUser = async (\n  email: string,\n  name: string,\n  password: string,\n  confirmPassword: string\n): Promise<SendOtpResponse> => {\n  try {\n    const res = await api.post(\"/auth/register\", {\n      email,\n      name,\n      password,\n      confirmPassword,\n    });\n    return res.data;\n  } catch (error: unknown) {\n    handleApiError(error);\n    throw error;\n  }\n};\n\n//verify otp\nexport const VerifyOtp = async (\n  userId: string,\n  otp: string\n): Promise<AuthResponse> => {\n  try {\n    const res = await api.post(\"/auth/register/verify-otp\", {\n      userId,\n      otp,\n    });\n    return res.data;\n  } catch (error: unknown) {\n    handleApiError(error);\n    throw error;\n  }\n};\n\n//resend otp\nexport const ResendOtp = async (userId: string): Promise<AuthResponse> => {\n  try {\n    const res = await api.post(\"/auth/register/resend-otp\", {\n      userId,\n    });\n    return res.data;\n  } catch (error: unknown) {\n    handleApiError(error);\n    throw error;\n  }\n};\n"],"names":[],"mappings":";;;;;;;;;;AACA;AACA;;;AAEA,uBAAuB;AACvB,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAGO,MAAM,YAAY,OACvB,OACA;IAEA,IAAI;QACF,MAAM,MAAM,MAAM,IAAI,IAAI,CAAe,eAAe;YACtD;YACA;QACF;QACA,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAgB;QACvB,IAAA,4IAAc,EAAC;QACf,MAAM;IACR;AACF;KAda;AAiBN,MAAM,aAAa,OACxB,OACA,MACA,UACA;IAEA,IAAI;QACF,MAAM,MAAM,MAAM,IAAI,IAAI,CAAC,kBAAkB;YAC3C;YACA;YACA;YACA;QACF;QACA,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAgB;QACvB,IAAA,4IAAc,EAAC;QACf,MAAM;IACR;AACF;MAlBa;AAqBN,MAAM,YAAY,OACvB,QACA;IAEA,IAAI;QACF,MAAM,MAAM,MAAM,IAAI,IAAI,CAAC,6BAA6B;YACtD;YACA;QACF;QACA,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAgB;QACvB,IAAA,4IAAc,EAAC;QACf,MAAM;IACR;AACF;MAda;AAiBN,MAAM,YAAY,OAAO;IAC9B,IAAI;QACF,MAAM,MAAM,MAAM,IAAI,IAAI,CAAC,6BAA6B;YACtD;QACF;QACA,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAgB;QACvB,IAAA,4IAAc,EAAC;QACf,MAAM;IACR;AACF;MAVa","debugId":null}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///home/kyawzinwinhtike/Desktop/battery_shop_ui/components/auth/SignupForm.tsx"],"sourcesContent":["\"use client\";\nimport { ResendOtp, SignUpUser, VerifyOtp } from \"@/libs/api\";\nimport { AuthResponse, SendOtpResponse } from \"@/types/auth\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport React, { useState, useEffect } from \"react\";\nimport toast from \"react-hot-toast\";\n\nconst SignupForm = () => {\n  const router = useRouter();\n  const [email, setEmail] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [showOtpModal, setShowOtpModal] = useState(false);\n  const [otpLoading, setOtpLoading] = useState(false);\n  const [otp, setOtp] = useState(\"\");\n  const [userId, setUserId] = useState(\"\");\n  const [resendDisabled, setResendDisabled] = useState(false);\n  const [timer, setTimer] = useState(60);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    if (password !== confirmPassword) {\n      toast.error(\"Passwords do not match.\");\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setOtpLoading(true);\n\n      const res: SendOtpResponse = await SignUpUser(\n        email,\n        name,\n        password,\n        confirmPassword\n      );\n\n      if (res.con) {\n        toast.success(\"OTP sent to your email!\");\n        if (res.userId) {\n          setUserId(res.userId);\n        }\n        // Show OTP modal only after backend response\n        setShowOtpModal(true);\n        setResendDisabled(true);\n        setTimer(60);\n      } else {\n        toast.error(res.message);\n      }\n    } catch (error: unknown) {\n      const message =\n        error instanceof Error\n          ? error.message\n          : \"Registration failed. Please try again.\";\n      toast.error(message);\n    } finally {\n      setLoading(false);\n      setOtpLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (otp.length === 6) handleVerifyOtp();\n  }, [otp]);\n\n  const handleVerifyOtp = async () => {\n    if (!otp || otp.length !== 6) return;\n    try {\n      const res: AuthResponse = await VerifyOtp(userId, otp);\n      if (!res.con) {\n        toast.error(res.message);\n        return;\n      }\n      toast.success(\"Account verified successfully!\");\n      router.push(\"/login\");\n      setShowOtpModal(false);\n    } catch (error: unknown) {\n      const message =\n        error instanceof Error ? error.message : \"Failed to verify OTP.\";\n      toast.error(message);\n    }\n  };\n\n  const handleResendOtp = async () => {\n    setOtpLoading(true);\n    try {\n      const res: AuthResponse = await ResendOtp(userId);\n      if (res.con) {\n        toast.success(\"New OTP sent to your email!\");\n        setTimer(60);\n        setResendDisabled(true);\n      } else {\n        toast.error(res.message);\n      }\n    } catch (error: unknown) {\n      const message =\n        error instanceof Error ? error.message : \"Failed to verify OTP.\";\n      toast.error(message);\n    } finally {\n      setOtpLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!resendDisabled) return;\n    const interval = setInterval(() => {\n      setTimer((prev) => {\n        if (prev <= 1) {\n          clearInterval(interval);\n          setResendDisabled(false);\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [resendDisabled]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-r from-purple-200 to-pink-200\">\n      <div className=\"w-full max-w-md bg-white rounded-3xl shadow-xl p-10 relative\">\n        <h2 className=\"text-4xl font-bold text-center text-gray-800 mb-8\">\n          Create Account\n        </h2>\n\n        <form className=\"flex flex-col gap-6\" onSubmit={handleSubmit}>\n          <div className=\"flex flex-col\">\n            <label className=\"text-gray-700 font-medium mb-2\">Email</label>\n            <input\n              type=\"email\"\n              placeholder=\"Enter your email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400 shadow-sm transition\"\n              required\n            />\n          </div>\n\n          <div className=\"flex flex-col\">\n            <label className=\"text-gray-700 font-medium mb-2\">Name</label>\n            <input\n              type=\"text\"\n              placeholder=\"Enter your name\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              className=\"px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400 shadow-sm transition\"\n              required\n            />\n          </div>\n\n          <div className=\"flex flex-col\">\n            <label className=\"text-gray-700 font-medium mb-2\">Password</label>\n            <input\n              type=\"password\"\n              placeholder=\"Enter your password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400 shadow-sm transition\"\n              required\n            />\n          </div>\n\n          <div className=\"flex flex-col\">\n            <label className=\"text-gray-700 font-medium mb-2\">\n              Confirm Password\n            </label>\n            <input\n              type=\"password\"\n              placeholder=\"Confirm your password\"\n              value={confirmPassword}\n              onChange={(e) => setConfirmPassword(e.target.value)}\n              className=\"px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400 shadow-sm transition\"\n              required\n            />\n          </div>\n\n          <button\n            disabled={loading}\n            className={`w-full py-3 text-white font-semibold rounded-xl shadow-md transition transform ${\n              loading\n                ? \"bg-purple-400 cursor-not-allowed\"\n                : \"bg-purple-600 hover:bg-purple-700 hover:-translate-y-1\"\n            }`}\n          >\n            {loading ? \"Creating account...\" : \"Sign Up\"}\n          </button>\n\n          <p className=\"text-center text-gray-500 mt-4\">\n            Already have an account?{\" \"}\n            <Link href=\"/login\" className=\"text-purple-600 hover:underline\">\n              Login\n            </Link>\n          </p>\n        </form>\n\n        {/*  OTP Modal */}\n        {showOtpModal && (\n          <div className=\"fixed inset-0 backdrop-blur-sm bg-white/30 flex items-center justify-center z-50\">\n            <div className=\"bg-white p-8 rounded-2xl shadow-lg w-96\">\n              {otpLoading ? (\n                <div className=\"flex flex-col items-center justify-center text-gray-600 py-8 space-y-4\">\n                  <div className=\"w-10 h-10 border-4 border-purple-500 border-t-transparent rounded-full animate-spin\"></div>\n                  <p className=\"text-lg font-medium\">Sending OTP...</p>\n                </div>\n              ) : (\n                <>\n                  <h3 className=\"text-2xl font-semibold mb-4 text-center\">\n                    Verify OTP\n                  </h3>\n                  <p className=\"text-gray-600 mb-4 text-center\">\n                    Enter the 6-digit OTP sent to your email.\n                  </p>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Enter OTP\"\n                    value={otp}\n                    onChange={(e) => setOtp(e.target.value)}\n                    maxLength={6}\n                    className=\"px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400 shadow-sm text-center text-lg tracking-widest w-full\"\n                  />\n\n                  <button\n                    onClick={handleResendOtp}\n                    disabled={resendDisabled}\n                    className={`w-full py-2 mt-4 text-sm rounded-lg transition ${\n                      resendDisabled\n                        ? \"text-gray-400 cursor-not-allowed\"\n                        : \"text-purple-600 hover:underline\"\n                    }`}\n                  >\n                    {resendDisabled ? `Resend OTP in ${timer}s` : \"Resend OTP\"}\n                  </button>\n                </>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SignupForm;\n"],"names":[],"mappings":"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","debugId":null}}]
}